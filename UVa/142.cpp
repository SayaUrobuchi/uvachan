#include<stdio.h>
int main()
{
	int a,b,c,d[55],e,f[55],g,h,i[28][2],j[28][2],k[55][2],y;
	char x;
	a=1;
	b=0;
	while(scanf("%c",&x)==1)
	{
		if(x=='M')
		{
			break;
		}
		if(x=='I')
		{
			scanf("%d%d%c",&k[a][0],&k[a][1],&x);
			d[a]=1;
			a++;
			continue;
		}
		if(x=='R')
		{
			scanf("%d%d%d%d%c",&i[b][0],&i[b][1],&j[b][0],&j[b][1],&x);
			b++;
			continue;
		}
	}
	for(c=0;c<a;c++)
	{
		for(e=0;e<b;e++)
		{
			if(k[c][0]<=j[e][0]&&k[c][0]>=i[e][0])
			{
				if(k[c][1]<=j[e][1]&&k[c][1]>=i[e][1])
				{
					d[c]=0;
					break;
				}
			}
		}
	}
	while(scanf("%c",&x)==1)
	{
		if(x=='#')
		{
			break;
		}
		scanf("%d%d%c",&g,&h,&x);
		for(c=b-1;c>=0;c--)
		{
			if(g>=i[c][0]&&g<=j[c][0])
			{
				if(h>=i[c][1]&&h<=j[c][1])
				{
					printf("%c\n",c+65);
					break;
				}
			}
		}
		if(c<0)
		{
			for(c=1,y=520000;c<a;c++)
			{
				if(d[c]==0)
				{
					continue;
				}
				e=g-k[c][0];
				e*=e;
				f[c]=e;
				e=h-k[c][1];
				e*=e;
				f[c]+=e;
				if(f[c]==0)
				{
					printf("%3d",c);
					break;
				}
				if(f[c]<y)
				{
					y=f[c];
				}
			}
			if(c==a)
			{
				for(c=1;c<a;c++)
				{
					if(y==f[c])
					{
						printf("%3d",c);
					}
				}
			}
			printf("\n");
		}
	}
	return 0;
}