#include<stdio.h>
int a,b,c,d,e,f,g,h,i[100][2],j[100],k[100][100],m;
bool l[100];
int main()
{
	m=0;
	while(scanf("%d",&h)==1)
	{
		if(h==0)
		{
			break;
		}
		for(a=0;a<100;a++)
		{
			l[a]=1;
			k[a][0]=1;
			for(b=1;b<100;b++)
			{
				k[a][b]=0;
			}
		}
		for(g=0;h>0;h--)
		{
			scanf("%d%d",&a,&b);
			for(c=0;c<g;c++)
			{
				if(j[c]==a)
				{
					break;
				}
			}
			if(c==g)
			{
				j[g++]=a;
			}
			for(d=0;d<g;d++)
			{
				if(j[d]==b)
				{
					break;
				}
			}
			if(d==g)
			{
				j[g++]=b;
			}
			k[c][k[c][0]]=d;
			k[c][0]++;
			k[d][k[d][0]]=c;
			k[d][0]++;
		}
		while(scanf("%d%d",&a,&b)==2)
		{
			if(a==0&&b==0)
			{
				break;
			}
			for(c=0;c<100;c++)
			{
				l[c]=1;
			}
			for(c=0;c<g;c++)
			{
				if(j[c]==a)
				{
					break;
				}
			}
			i[0][0]=c;
			i[0][1]=0;
			l[c]=0;
			for(c=0,d=1;c<d;c++)
			{
				if(i[c][1]>b)
				{
					break;
				}
				e=i[c][0];
				for(f=1;f<k[e][0];f++)
				{
					if(l[k[e][f]])
					{
						l[k[e][f]]=0;
						i[d][0]=k[e][f];
						i[d++][1]=i[c][1]+1;
					}
				}
			}
			printf("Case %d: %d nodes not reachable from node %d with TTL = %d.\n",++m,g-c,a,b);
		}
	}
	return 0;
}